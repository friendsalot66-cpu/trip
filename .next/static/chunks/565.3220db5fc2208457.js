"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{1565:function(e,t,n){n.r(t),n.d(t,{MapComponent:function(){return M}});var r,o,l,a,i,s,c=n(7437),u=n(2265);function p(e,t){return Object.freeze({...e,...t})}let f=(0,u.createContext)(null),d=f.Provider;function m(){let e=(0,u.useContext)(f);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var x=n(4887);function h(e){return(0,u.forwardRef)(function(t,n){let{instance:r,context:o}=e(t).current;return(0,u.useImperativeHandle)(n,()=>r),null==t.children?null:u.createElement(d,{value:o},t.children)})}function g(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function v(e,t){return null==t?function(t,n){let r=(0,u.useRef)();return r.current||(r.current=e(t,n)),r}:function(n,r){let o=(0,u.useRef)();o.current||(o.current=e(n,r));let l=(0,u.useRef)(n),{instance:a}=o.current;return(0,u.useEffect)(function(){l.current!==n&&(t(a,n,l.current),l.current=n)},[a,n,r]),o}}function b(e,t){let n=(0,u.useRef)(t);(0,u.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function y(e,t){let n=(0,u.useRef)();(0,u.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function j(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function w(e,t){(0,u.useEffect)(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function C(e){return function(t){let n=m(),r=e(j(t,n),n);return b(n.map,t.attribution),y(r.current,t.eventHandlers),w(r.current,n),r}}var N=n(759),k=n.n(N);let O=h((r=v(function({positions:e,...t},n){let r=new N.Polyline(e,t);return g(r,p(n,{overlayContainer:r}))},function(e,t,n){t.positions!==n.positions&&e.setLatLngs(t.positions)}),function(e){let t=m(),n=r(j(e,t),t);return y(n.current,e.eventHandlers),w(n.current,t),function(e,t){let n=(0,u.useRef)();(0,u.useEffect)(function(){if(t.pathOptions!==n.current){let r=t.pathOptions??{};e.instance.setStyle(r),n.current=r}},[e,t])}(n.current,e),n})),z=h(C(v(function({position:e,...t},n){let r=new N.Marker(e,t);return g(r,p(n,{overlayContainer:r}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}))),E=(o=function(e,t){return g(new N.Popup(e,t.overlayContainer),t)},l=function(e,t,{position:n},r){(0,u.useEffect)(function(){let{instance:o}=e;function l(e){e.popup===o&&(o.update(),r(!0))}function a(e){e.popup===o&&r(!1)}return t.map.on({popupopen:l,popupclose:a}),null==t.overlayContainer?(null!=n&&o.setLatLng(n),o.openOn(t.map)):t.overlayContainer.bindPopup(o),function(){t.map.off({popupopen:l,popupclose:a}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(o)}},[e,t,r,n])},a=v(o),i=function(e,t){let n=m(),r=a(j(e,n),n);return b(n.map,e.attribution),y(r.current,e.eventHandlers),l(r.current,n,e,t),r},(0,u.forwardRef)(function(e,t){let[n,r]=(0,u.useState)(!1),{instance:o}=i(e,r).current;(0,u.useImperativeHandle)(t,()=>o),(0,u.useEffect)(function(){n&&o.update()},[o,n,e.children]);let l=o._contentNode;return l?(0,x.createPortal)(e.children,l):null}));function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let I=(0,u.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:o,id:l,placeholder:a,style:i,whenReady:s,zoom:c,...p},f){let[m]=(0,u.useState)({className:o,id:l,style:i}),[x,h]=(0,u.useState)(null);(0,u.useImperativeHandle)(f,()=>x?.map??null,[x]);let g=(0,u.useCallback)(r=>{if(null!==r&&null===x){let o=new N.Map(r,p);null!=n&&null!=c?o.setView(n,c):null!=e&&o.fitBounds(e,t),null!=s&&o.whenReady(s),h(Object.freeze({__version:1,map:o}))}},[]);(0,u.useEffect)(()=>()=>{x?.map.remove()},[x]);let v=x?u.createElement(d,{value:x},r):a??null;return u.createElement("div",L({},m,{ref:g}),v)}),R=(s=C(v(function({url:e,...t},n){return g(new N.TileLayer(e,j(t,n)),n)},function(e,t,n){!function(e,t,n){let{opacity:r,zIndex:o}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=o&&o!==n.zIndex&&e.setZIndex(o)}(e,t,n);let{url:r}=t;null!=r&&r!==n.url&&e.setUrl(r)})),(0,u.forwardRef)(function(e,t){let{instance:n}=s(e).current;return(0,u.useImperativeHandle)(t,()=>n),null})),_=(0,n(9205).Z)("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),A=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="flight"===t,o=r?'<div style="position: relative;">\n         <div class="marker-pin is-flight"></div>\n         <div class="marker-number" style="top:-6px">âœˆ</div>\n       </div>':'<div style="position: relative;">\n         <div class="marker-pin '.concat(r?"is-flight":"hotel"===t?"is-hotel":"stopover"===t?"is-stopover":"",'" style="').concat(n?"background-color: ".concat(n):"",'"></div>\n         <div class="marker-number">').concat(e||"","</div>\n       </div>");return k().divIcon({className:"custom-marker-icon",html:o,iconSize:[30,42],iconAnchor:[15,42],popupAnchor:[0,-45]})},D=e=>{let{center:t,zoom:n,bounds:r,places:o}=e,l=m().map;return(0,u.useEffect)(()=>{let e=new ResizeObserver(()=>{l.invalidateSize()});return l.getContainer()&&e.observe(l.getContainer()),()=>e.disconnect()},[l]),(0,u.useEffect)(()=>{if(o&&o.length>0){let e=o.filter(e=>"flight"!==e.type).map(e=>k().latLng(e.lat,e.lng));if(e.length>0){let t=k().latLngBounds(e);l.fitBounds(t,{padding:[50,50],animate:!0,duration:1});return}}l.flyTo(t,n,{duration:1.2,easeLinearity:.25})},[o,t,n,l]),(0,u.useEffect)(()=>{r&&l.fitBounds(r,{padding:[50,50]})},[r,l]),null},H=["#ef4444","#3b82f6","#10b981","#f59e0b","#8b5cf6","#ec4899"],M=e=>{let t,n,{places:r,center:o,zoom:l,allPlaces:a,isOverview:i,stopoverCandidates:s}=e;if(i&&a){let e=a.flatMap(e=>e.places.map(e=>k().latLng(e.lat,e.lng)));e.length>0&&(n=k().latLngBounds(e)),t=a.map((e,t)=>{let n=H[t%H.length],r=e.places.map(e=>[e.lat,e.lng]);return(0,c.jsxs)(u.Fragment,{children:[e.places.length>1&&(0,c.jsx)(O,{positions:r,pathOptions:{color:n,weight:3,opacity:.8}}),e.places.map((e,r)=>(0,c.jsx)(z,{position:[e.lat,e.lng],icon:A(r+1,e.type,n),children:(0,c.jsx)(E,{children:(0,c.jsxs)("strong",{children:["Day ",t+1,": ",e.name]})})},"".concat(t,"-").concat(e.id)))]},t)})}else{let e=r.map(e=>[e.lat,e.lng]),n=0,o=e=>{if("flight"!==e.type)return++n};t=(0,c.jsxs)(c.Fragment,{children:[r.length>1&&(0,c.jsx)(O,{positions:e,pathOptions:{color:"#3b82f6",weight:4,opacity:.7,dashArray:"10, 10",lineCap:"round"}}),r.map(e=>(0,c.jsx)(z,{position:[e.lat,e.lng],icon:A(o(e),e.type),children:(0,c.jsx)(E,{className:"custom-popup",children:(0,c.jsxs)("div",{className:"p-1 min-w-[180px]",children:[(0,c.jsx)("span",{className:"\n                            text-[10px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded text-white mb-1 inline-block\n                            ".concat("flight"===e.type?"bg-purple-500":"hotel"===e.type?"bg-amber-500":"bg-blue-500","\n                        "),children:e.type}),(0,c.jsx)("strong",{className:"block text-sm font-bold text-gray-800",children:e.name}),e.time&&(0,c.jsx)("p",{className:"text-xs font-mono text-gray-500 mt-0.5",children:e.time}),(0,c.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.remarks}),e.travelTime&&(0,c.jsxs)("p",{className:"text-xs text-brand-600 font-bold mt-1",children:["\uD83D\uDE97 ",e.travelTime]}),e.expenses&&(0,c.jsxs)("p",{className:"text-xs text-emerald-600 font-bold mt-1",children:["\uD83D\uDCB0 ",e.expenses.currency,e.expenses.amount]})]})})},e.id)),s&&s.map((e,t)=>(0,c.jsx)(z,{position:[e.lat,e.lng],icon:A(void 0,"stopover"),children:(0,c.jsx)(E,{className:"custom-popup",children:(0,c.jsxs)("div",{className:"p-0 min-w-[200px] overflow-hidden rounded-lg",children:[(0,c.jsx)("div",{className:"h-24 w-full bg-gray-200 relative overflow-hidden",children:(0,c.jsx)("img",{src:"https://placehold.co/400x200/10b981/ffffff?text=".concat(encodeURIComponent(e.name)),alt:e.name,className:"w-full h-full object-cover"})}),(0,c.jsxs)("div",{className:"p-3",children:[(0,c.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded text-white bg-emerald-500 mb-1 inline-block",children:"Recommended"}),(0,c.jsx)("strong",{className:"block text-sm font-bold text-gray-800 mb-1",children:e.name}),(0,c.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:e.address}),(0,c.jsx)("p",{className:"text-xs text-gray-600 mb-3",children:e.remarks}),(0,c.jsxs)("a",{href:"https://www.youtube.com/results?search_query=".concat(encodeURIComponent(e.name+" travel guide")),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-xs font-bold text-red-600 hover:text-red-700 bg-red-50 hover:bg-red-100 p-2 rounded transition-colors",children:[(0,c.jsx)(_,{size:14})," Watch on YouTube"]})]})]})})},"stopover-".concat(t)))]})}return(0,c.jsxs)(I,{center:o,zoom:l,style:{height:"100%",width:"100%",zIndex:0},zoomControl:!1,scrollWheelZoom:!0,className:"map-container",children:[(0,c.jsx)(R,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"}),(0,c.jsx)(D,{center:o,zoom:l,bounds:n,places:i?void 0:r}),t]})}}}]);